---
date: '2016-12-14 19:39 +0800'
published: true
title: 关于移动支付
category:
  - Android
tags:
  - Android
  - 移动支付
---
## 前言

现在主要有两大支付平台。支付宝和微信。支付技术是越来越成熟，人们越来越便利。支付方式也越来越多，比如短信支付、扫描支付、指纹支付、声波支付等等。

## 简介

这里我们给出这两种支付的流程图。

### 支付宝支付流程
{% fi http://afirsraftgarrier.qiniudn.com/paycharttaobao.png %}

* [开发文档](https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.kNFS8u&treeId=59&articleId=103658&docType=1)

### 微信支付流程 
![](http://afirsraftgarrier.qiniudn.com/paychartwx.png)
* [开发文档](https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=11_1)

### 总结

可以看到这里面的规律，基本上有五个角色：用户、商家客户端、商家服务端、支付平台客户端、支付平台服务端。其大致分为几个步骤：

* 从商家服务端取得签名的支付相关信息。
	* 这里是为了将信息签名，用于后面验证支付相关信息的有效性。（防止支付相关信息被篡改，比如用[RSA算法](/2016/12/07/2016-12-07-how-simple-secrete)签名）
* 通过支付平台SDK发起支付请求。
	* 这里请求需要授权信息。
* 支付平台返回支付结果，并异步通知商家服务端。
	* 这里进行两部分的确认，即商家客户端和商家服务端。
   * 这部分包括签名信息的验证，保证数据没有被篡改过。

手机端实现可以参考下这里DEMO代码，[简单集成支付宝和微信支付](https://github.com/AfirSraftGarrier/ACCDemoAndroid/blob/master/app/src/main/java/afirsraftgarrier/demoandroid/thirdparty/pay/PayActivity.java)。
